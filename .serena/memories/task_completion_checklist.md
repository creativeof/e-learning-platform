# タスク完了時のチェックリスト

## コード変更後の必須チェック

### 1. Lint実行
```bash
npm run lint
```
- ESLintエラーがないことを確認
- 警告も可能な限り解消

### 2. TypeScript型チェック
```bash
npx tsc --noEmit
```
- 型エラーがないことを確認
- strict mode対応

### 3. ビルド確認
```bash
npm run build
```
- ビルドが成功することを確認
- 本番環境でのエラーを事前に検出

### 4. 開発サーバー動作確認
```bash
npm run dev
```
- 変更箇所が正しく動作することを確認
- 関連する機能に影響がないか確認

## Supabase関連の変更時

### データベーススキーマ変更
- マイグレーションファイルを作成
- RLS（Row Level Security）ポリシーを設定
- 既存データへの影響を確認

### 認証関連の変更
- Middlewareでのトークンリフレッシュが正しく動作するか確認
- 未認証/認証済み/管理者それぞれの動作を確認

## コミット前

### ファイル確認
```bash
git status
git diff
```
- 変更内容が意図通りか確認
- 不要なファイルが含まれていないか確認

### コミットメッセージ
- 変更内容を明確に記述
- 日本語または英語で簡潔に

## 特に注意が必要な変更

### Server ComponentsとClient Components
- `'use client'` ディレクティブの配置が正しいか
- データフェッチングがServer Componentで行われているか
- クライアント側の状態管理が適切か

### アクセス制御
- 未認証ユーザーのアクセス制限が正しく機能するか
- 管理者権限チェックがサーバーサイドで行われているか
- RLSポリシーが適切に設定されているか

### パフォーマンス
- 不要なデータフェッチングがないか
- 画像最適化（next/image）を使用しているか
- 動的インポートが適切に使われているか
